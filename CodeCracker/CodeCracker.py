import json
# actual variables

msg = """Bzdeai k nem sqob ydeod tqqbzi iqya qhzs pdz yeiz, lpskmmteam sqki pdkp ska cxyksi pdsqcmd pdz wqcapkeal osqcodzi k tqam, tzka jemcsz. Sacmmtzi kmkealp del semdp ldqctizs ykl k sejtz, kai pdz nzksizi jkoz nzazkpd pdz nsqki-nsewwzi xkakwk ykl pcsazi pqyksi pdz sqkiyku nztqy. Tdz dqp lca nzkp iqya szwqslztzlltu, kai epl nteaieam skul yzsz szjtzopzi jsqw pdz sqobl. Pzslxeskpeqa xqcszi iqya pdz wka’l jkoz, kai aqy kai pdza dz wqhzi ewxkpezaptu pq nscld kyku lqwz ncffeam ealzop. Hel dzki ykl skelzi ltemdptu knqhz pdz tzhzt qj pdz sqob, kai jsqw del xqeap qj hkapkmz k lxtzaiei xkaqskwk lxszki qcp nzazkpd dew.

Tq del tzjp tku pdz wqcapkeal, ntcz, szwqpz, kai jctt qj scmmzi iemaepu ktt pdzes qya. Tq del semdp, k jzspetz Sqcpd Awzseoka hkttzu szhzktzi eplztj ea pdz ldewwzseam ielpkaoz. Oookleqakttu, kl k temdp xcjj qj yeai okwz cx jsqw pdz tqytkail, ep nsqcmdp yepd ep pdz ictt, dzkhu aqelz qj ka zameaz kp yqsb.

Hktj ka dqcs xkllzi, kai pdza pdz jeslp lema qj tejz ykl szhzktzi ea pdz sqkiyku nztqy. Tdzsz kxxzkszi sqcai k nzai k tqam teaz qj wctzl, zkod qj pdzw ncsizazi yepd pyq nem xkobl. Ia jsqap qj pdz[6] pskea qj wctzl yktbzi k ydepz wka otki ea ieamu qhzskttl.

Tdz jemcsz osqcodeam nzdeai pdz sqob wqhzi ltemdptu kai lzzwzi pq msqy pzalz kai zrxzopkap, ydetz pdz zuzl ea pdz nzksizi jkoz mteapzi kl pdzu xzzszi iqya kp pdz sqki.

Nqpdeam dkxxzazi, dqyzhzs. Tdz wctzl xtqiizi qa, yepd pdzes tzkizs lpseieam kyku kdzki qj pdzw, kai pdz tqaztu lzapeazt ykpodzi pdzw capet pdzu dki xkllzi iqya pdz sqki kai dki hkaeldzi nztqy pdz tzhzt qj pdz selz ydeod tzi pdzw qa pq pdz xtkeal.

“Hz qcmdp pq nz oqweam lqqa aqy.”

Tdz wka lxqbz ktqci, kai pdzsz ykl k ocseqcl, wzpktteo lqcai ea del sklxeam hqeoz.

Tza weacpzl xkllzi, kai pdza pdz otzks, iscwweam lqcai qj k dqslz’l dqqjl okwz pq dew, kai xszlzaptu ksqcai pdz lkwz gkmmzi lxcs pdzsz kxxzkszi pdz jemcsz qj k wka qa dqslznkob. Hz ykl seieam ktqam kp k mqqi xkoz, ncp pdz szeal yzsz tueam tqqlztu kosqll pdz dqslz’l azob, kai pdz kaewkt ykl xeobeam epl yku camceizi iqya pdz sqcmd lcsjkoz qj pdz sqki. Eheizaptu ep ykl qa k jkweteks psket.

Ap pdz lemdp, pdz tcsbeam jemcsz mszy pzalzs lpett, kai pdz lqcai qj k tqy msqyt, ktwqlp kaewkt-tebz ea odkskopzs, wemdp dkhz nzza dzksi. Stqytu pdz sejtz ykl azlptzi otqlzs pq pdz ldqctizs. Tdz xkakwk dkp, nzeam pqq oqalxeocqcl, ykl xcttzi qjj kai isqxxzi nzdeai dew, kjpzs ydeod pdz nksz, skpdzs nkti dzki ykl tqyzszi capet pdz semdp odzzb pqcodzi pdz lpqob qj pdz mca. Tdz tzjp zuz ykl otqlzi, kai pdz semdp[7] lemdpzi ktqam pdz nksszt, ydeod kp pdz lkwz pewz ykl ldejpzi, jqttqyeam pdz wka qa dqslznkob.

A jzy wqwzapl xkllzi, icseam ydeod pdz iqya-xqeapzi wcfftz ldejpzi tebz k lxu-mtkll, jqttqyeam pdz wqheam qngzop. Tdza——

Cskob! Iapq pdz lpett kes k ntcz xcjj qj lwqbz sqlz kai dcam jqs k wqwzap knqhz pdz sqob. Tdz isqaz qj pdz ncttzp lqcaizi otzkstu iqya pdz zimz qj pdz ltqxz kl pdz izkitu welletz dcstzi eplztj pqyksi epl wksb. A vceob osu okwz cx jsqw pdz sqkiyku, kai pdz yzkxqa ykl lpzktpdetu yepdiskya.

Qceobtu, dqyzhzs, pdz wka nzdeai pdz sqob xzzszi iqya, ncp ydza dz iei lq dz lky pdkp nteai odkaoz dki lpzxxzi ea kai pdykspzi dew. Tdz dqslz dki kxxkszaptu lpcwntzi qa k tqqlz sqob gclp kl pdz ldqp ykl jeszi, kai dki szkszi nkob ltemdptu pq szoqhzs epl jqqpeam; pdzszjqsz, ep ykl eapq pdz kaewkt’l lqjp, sqcaizi azob pdkp pdz dzkhu ncttzp dki nqszi epl yku, kai aqp eapq pdz wqsz xszoeqcl pksmzp kp ydeod ep dki nzza kewzi.

Tdz oszkpcsz ykl aqy tueam ea pdz sqkiyku, kai pdz oqahctlehz wqhzwzapl qj epl tewnl oqcti nz lzza iewtu pdsqcmd pdz tepptz otqci qj iclp ydeod dki nzza skelzi nu epl jktt.

Tdz wka qa pdz dqslz’l nkob dki nzza dcstzi ea k dzkx nu pdz leiz qj pdz sqki, ncp kl del yqcti-nz wcsizszs ykpodzi, dz lky dew selz pq del jzzp kai lpksz cx ea pdz mzazskt ieszopeqa qj pdz sqob jsqw ydeod pdz ldqp dki nzza jeszi. Wksazi nu pdkp wqhzwzap, pdz lbctbzs lyejptu gzsbzi del dzki nkob kai osqcodzi lpett tqyzs ea del xtkoz.

[8]

“Ccslz dew!” pdz dksi hqeoz mskpzi. “Hz ktykul dkl pdz jezai’l qya tcob!”

Gsklxeam del sejtz kai dkp, ncp lpett bzzxeam qa dkail kai bazzl, dz nzmka ealpeaopehztu pq oskyt kyku caizs oqhzs qj pdz sqob. Hz dki mqaz aq wqsz pdka k uksi, pdqcmd, nzjqsz dz xkclzi esszlqtcpztu kai del jeamzsl lqcmdp del nztp.

Tdzsz yzsz qpdzs ncttzpl ea pdkp nztp, ncp pdz wka’l jketcsz dki caazshzi dew, kai k ozspkea jkpktelpeo ealpeaop pqti dew pdkp dz ykl aqp tebztu pq lcoozzi ea k lzoqai kppzwxp, aqy pdkp pdz jeslp dki oqwz pq akcmdp. Tdz jemcsz ea pdz sqki yqcti nz qa epl mcksi aqy, kai ej kaqpdzs ldqp wellzi epl wksb, pdz xqeap jsqw ydeod ep dki nzza jeszi yqcti ktwqlp ozspkeatu nz tqokpzi. Fsqw pdkp yqcti qatu nz k lpzx pq pdz ieloqhzsu qj pdz ldqqpzs’l eizapepu, kai pdz tkppzs iei aqp oksz pq oqapzwxtkpz lcod k xqllenetepu. Cqalzvczaptu, yepd k lakbztebz wqhzwzap, pdz tzka jemcsz szlcwzi epl xsqmszll kyku jsqw pdz sqobl, kai xszlzaptu, dkheam szkodzi pdz xsqpzopeqa qj tksmz nqytizsl, lpskemdpzazi cx k tepptz wqsz kai eaoszklzi epl xkoz.

Tdz jcmepehz bazy pdkp pdz wka dz dki psezi pq bett ykl wqsz pdka clckttu jqai qj pdz iueam dqslz, kai yqcti xsqnkntu iztku kp epl leiz jqs k xszoeqcl weacpz qs pyq nzjqsz kppzwxpeam pq lqthz pdz wulpzsu qj pdz ldqp. Tdkp iztku xsqwelzi pq zakntz dew pq wkbz mqqi del zlokxz, kai dz ykl szlqthzi pq pkbz zhzsu xqllentz kihkapkmz qj ep. Fqs xzsdkxl jejpzza weacpzl dz iqcntzi kai pyelpzi, aqy klozaieam kai aqy izlozaieam pdz jqqpdettl. Ap pdz zai qj pdkp pewz dz dki szkodzi pdz sqki kmkea, kai, ykpodeam[9] del odkaoz, iqimzi kosqll ep. Tdel tkpzlp wqhz nsqcmdp dew eapq pdeob yqqil, pdsqcmd ydeod dz dcssezitu pdszkizi del yku ea pdz ieszopeqa qj pdz hkttzu.

Hz dei del sejtz ea k dqttqy pszz, kai ydza dz szkodzi pdz tepptz weaeam okwx dz dki ocaaeamtu oqaozktzi ktt zheizaoz qj kmepkpeqa qs mcetp.
"""

msg_frequency = {
    "a": 0,
    "b": 0,
    "c": 0,
    "d": 0,
    "e": 0,
    "f": 0,
    "g": 0,
    "h": 0,
    "i": 0,
    "j": 0,
    "k": 0,
    "l": 0,
    "m": 0,
    "n": 0,
    "o": 0,
    "p": 0,
    "q": 0,
    "r": 0,
    "s": 0,
    "t": 0,
    "u": 0,
    "v": 0,
    "w": 0,
    "x": 0,
    "y": 0,
    "z": 0
}

"""Functions"""
# returns the sorted frequencies


def frequency_sorter(dictonary):
    frequency_array = []
    for key in dictonary:
        frequency_array.append((key, dictonary[key]))
    sort(frequency_array)
    return frequency_array

# sorts with bubble sort recursively high to low seperate function so it can
# call on itself recursively


def sort(array):
    switches = 0
    for index in range(len(array)):
        if index + 1 < len(array):
            if array[index][1] < array[index + 1][1]:
                array.insert(
                    index + 2, (array[index][0], array[index][1]))
                array.pop(index)
                switches += 1
    if switches > 0:
        sort(array)

# finds the frequency of a string and updates to msg_frequency


def get_frequency(message):
    number_of_letters = 0
    message = message.lower()
    for key in msg_frequency:
        for letter in message:
            if key == letter:
                msg_frequency[key] += 1
                number_of_letters += 1
    for key in msg_frequency:
        msg_frequency[key] = (msg_frequency[key] / number_of_letters) * 100

# compares array frequency with the real frequencies and stores frequencies in order.


def frequency_matcher(coded_values):
    key_dict = {}
    with open('/Users/andrewli/Documents/Code Stuff/Mini_Projects/CodeCracker/Data.json', 'r') as f:
        real_values = frequency_sorter(json.loads(f.read()))
        for i in range(len(real_values)):
            key_dict[real_values[i][0]] = coded_values[i][0]
    return key_dict
# input dict in form of "actual value = code value" replaces the letter with new value


def frequency_decode(dict, msg):
    decoded_msg = ""
    lower_msg = msg.lower()
    for character in lower_msg:
        for key in dict:
            if character == dict[key]:
                decoded_msg += key
                break
        else:
            decoded_msg += character
    return decoded_msg


def decode(msg):
    get_frequency(msg)
    print(frequency_decode(frequency_matcher(
        frequency_sorter(msg_frequency)), msg))


decode(msg)
